<!DOCTYPE HTML>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Research</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/fade.css" media="screen" />

</head>
<body class="body">
    <header>
        <nav class="menu">
            <ul>
                <li>
                    <a href="dashboard.html">Long Short Ratio</a>
                </li>
                <li>
                    <a href="dashboardoi.html">Open Interest</a>
                </li>
                <li>
                    <a href="dashboardobd.html">Order Book Depth</a>
                </li>
                <li>
                    <a href="dashboardmv.html">Market Volume</a>
                </li>
                <li>
                    <a href="dashboardli.html">Liquidations</a>
                </li>
                <li>
                    <a href="dashboardf.html">Funding</a>
                </li>
                <li>
                    <a href="dashboardrd.html">Radar</a>
                </li>
            </ul>
        </nav>
    </header>

    <section class="section1">
        <div class="upperpanel">
            <h1>
                Open Interest
            </h1>

            <table class="upperlsr">
                <thead>
                    <tr>
                        <th>OI Global: <span id="oiglobal"> </span></th>
                        <th>4h Δ: <span id="oialt4h"> </span></th>
                        
                    </tr>
                    <tr>
                        <th>OI Global Positions: <span id="oiglobalposi"> </span></th>
                        <th>4h Δ: <span id="oialt4hp"> </span></th>
                    </tr>
                </thead>
            </table>
            <p><br /><br />Atualizado pela útima vez em <br /> <span id="timestamplsrg"></span></p>

        </div>
    </section>
    <section class="section2">
        <div class="lowerpanel">
            <table class="lowerlsr">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>OI</th>
                        <th>15m Δ</th>
                        <th>15m Δ%</th>
                        <th>1h Δ</th>
                        <th>1h Δ%</th>
                        <th>4h Δ</th>
                        <th>4h Δ%</th>
                        <th>24h Δ</th>
                        <th>24h Δ%</th>


                    </tr>
                </thead>
                <tbody>
                    <!-- btcusdt -->
                    <tr>
                        <th><span id="btcusdt"></span></th>
                        <th><span id="OI"></span></th>
                        <th><span id="15moi"></span></th>
                        <th><span id="15mpoi"></span></th>
                        <th><span id="1hoi"></span></th>
                        <th><span id="1hpoi"></span></th>
                        <th><span id="4hoi"></span></th>
                        <th><span id="4hpoi"></span></th>
                        <th><span id="24hoi"></span></th>
                        <th><span id="24hpoi"></span></th>
                    </tr>
                    <!-- zilusdt -->
                   
                </tbody>

            </table>
        </div>
    </section>
    <script>
        // BTCUSDT
        const urlvalue = 'https://fapi.binance.com/futures/data/'
        const ratiovalue = 'openInterestHist?symbol=BTCUSDT&period=15m'
        const urlvalue4hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue4hr = 'openInterestHist?symbol=BTCUSDT&period=4h'
        const urlvalue1hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue1hr = 'openInterestHist?symbol=BTCUSDT&period=1h'
        const urlvalue24hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue24hr = 'openInterestHist?symbol=BTCUSDT&period=1d'
        fetch(urlvalue + ratiovalue)
            .then(function (response) {
                return response.json()
            })
            .then(function (data) {
                const earlyopeninterestvalue = parseInt(data.at(28)['sumOpenInterestValue'])
                const finalopeninterestvalue = parseInt(data.at(29)['sumOpenInterestValue'])
                const finalopeninterestpositions = parseInt(data.at(29)['sumOpenInterestValue'])
                const openinterestvaluevar = finalopeninterestvalue - earlyopeninterestvalue
                const openinterestvaluevarp = (finalopeninterestvalue / earlyopeninterestvalue -1 ) * 100
                const tstmp = data.at(29)['timestamp']
                const dtoi = new Date(tstmp)
                document.getElementById('oiglobal').
                    innerHTML = finalopeninterestvalue
                document.getElementById('oiglobalposi').
                    innerHTML = finalopeninterestpositions
                document.getElementById('btcusdt').
                    innerHTML = data.at(29)['symbol']
                document.getElementById('OI').
                    innerHTML = finalopeninterestvalue
                document.getElementById('timestamplsrg').
                    innerHTML = dtoi.toLocaleString()
                document.getElementById('15moi').
                    innerHTML = openinterestvaluevar
                document.getElementById('15mpoi').
                    innerHTML = openinterestvaluevarp.toFixed(2)+'%'
            })
        fetch(urlvalue1hr + ratiovalue1hr)
                .then(function (response) {
                return response.json()
              })
                .then(function (data2) {
                const earlyopeninterestvalue = parseInt(data2.at(28)['sumOpenInterestValue'])
                const finalopeninterestvalue = parseInt(data2.at(29)['sumOpenInterestValue'])
                const openinterestvaluevar = finalopeninterestvalue - earlyopeninterestvalue
                const openinterestvaluevarp = (finalopeninterestvalue / earlyopeninterestvalue - 1) * 100
                document.getElementById('1hoi').
                    innerHTML = openinterestvaluevar
                document.getElementById('1hpoi').
                    innerHTML = openinterestvaluevarp.toFixed(2) + '%'
                })
        fetch(urlvalue4hr + ratiovalue4hr)
            .then(function (response) {
                return response.json()
            })
            .then(function (data3) {
                const earlyopeninterestvalue = parseInt(data3.at(28)['sumOpenInterestValue'])
                const finalopeninterestvalue = parseInt(data3.at(29)['sumOpenInterestValue'])
                const openinterestvaluevar = finalopeninterestvalue - earlyopeninterestvalue
                const openinterestvaluevarp = (finalopeninterestvalue / earlyopeninterestvalue - 1) * 100
                document.getElementById('4hoi').
                    innerHTML = openinterestvaluevar
                document.getElementById('4hpoi').
                    innerHTML = openinterestvaluevarp.toFixed(2) + '%'
            })
        fetch(urlvalue24hr + ratiovalue24hr)
            .then(function (response) {
                return response.json()
            })
            .then(function (data4) {
                const earlyopeninterestvalue = parseInt(data4.at(28)['sumOpenInterestValue'])
                const finalopeninterestvalue = parseInt(data4.at(29)['sumOpenInterestValue'])
                const openinterestvaluevar = finalopeninterestvalue - earlyopeninterestvalue
                const openinterestvaluevarp = (finalopeninterestvalue / earlyopeninterestvalue - 1) * 100
                document.getElementById('24hoi').
                    innerHTML = openinterestvaluevar
                document.getElementById('24hpoi').
                    innerHTML = openinterestvaluevarp.toFixed(2) + '%'
            })


    </script>
    
</body>
</html>