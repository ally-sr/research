<!DOCTYPE HTML>
<html lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Research</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/fade.css" media="screen" />
    <element onload="script">
</head>
<body class="body">
    <nav class="menu">
        <ul>
            <li>
                <a href="dashboard.html">Long Short Ratio</a>
            </li>
            <li>
                <a href="dashboardoi.html">Open Interest</a>
            </li>
            <li>
                <a href="dashboardobd.html">Order Book Depth</a>
            </li>
            <li>
                <a href="dashboardmv.html">Market Volume</a>
            </li>
            <li>
                <a href="dashboardli.html">Liquidations</a>
            </li>

            <li>
                <a href="dashboardf.html">Funding</a>
            </li>

            <li>
                <a href="dashboardrd.html">Radar</a>
            </li>
        </ul>
    </nav>
    <section class="section1">
        <div class="upperpanel">
            <h1>
                Long Short Ratio
            </h1>

            <table class="upperlsr">
                <thead>
                    <tr>
                        <th>LSR Global: <span id="lsrglobal"> </span></th>
                        <th>4h Δ: <span id="alt4h"> </span></th>
                    </tr>
                    <tr>
                        <th>LSR Global Sum: <span id="lsrglobalsum"> </span></th>
                        <th>4h Δ: <span id="alt4hsum"> </span></th>
                    </tr>
                </thead>
            </table>
            <p><br /><br />Atualizado pela útima vez em <br /> <span id="timestamplsrg"></span></p>

        </div>
    </section>
    <section class="section2">
        <div class="lowerpanel">
            <table class="lowerlsr">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>LSR</th>
                        <th>15m Δ</th>
                        <th>15m Δ%</th>
                        <th>1h Δ</th>
                        <th>1h Δ%</th>
                        <th>4h Δ</th>
                        <th>4h Δ%</th>
                        <th>24h Δ</th>
                        <th>24h Δ%</th>


                    </tr>
                </thead>
                <tbody>
                    <!-- btcusdt -->
                    <tr>
                        <th><span id="btcusdt"></span></th>
                        <th><span id="LSR"></span></th>
                        <th><span id="15mlsr"></span></th>
                        <th><span id="15mplsr"></span></th>
                        <th><span id="1hlsr"></span></th>
                        <th><span id="1hplsr"></span></th>
                        <th><span id="4hlsr"></span></th>
                        <th><span id="4hplsr"></span></th>
                        <th><span id="24hlsr"></span></th>
                        <th><span id="24hplsr"></span></th>
                    </tr>
                    <!-- zilusdt -->
                    <tr>
                        <th><span id="zilusdt"></span></th>
                        <th><span id="lsrglobalZILUSDT"></span></th>
                        <th><span id="15mlsrZILUSDT"></span></th>
                        <th><span id="15mplsrZILUSDT"></span></th>
                        <th><span id="1hlsrZILUSDT"></span></th>
                        <th><span id="1hplsrZILUSDT"></span></th>
                        <th><span id="4hlsrZILUSDT"></span></th>
                        <th><span id="4hplsrZILUSDT"></span></th>
                        <th><span id="24hlsrZILUSDT"></span></th>
                        <th><span id="24hplsrZILUSDT"></span></th>
                    </tr>
                </tbody>

            </table>
        </div>
    </section>
    
    <script>
        // BTCUSDT
        const urlvalue = 'https://fapi.binance.com/futures/data/'
        const ratiovalue = 'globalLongShortAccountRatio?symbol=BTCUSDT&period=15m'
        const urlvalue4hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue4hr = 'globalLongShortAccountRatio?symbol=BTCUSDT&period=4h'
        const urlvalue1hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue1hr = 'globalLongShortAccountRatio?symbol=BTCUSDT&period=1h'
        const urlvalue24hr = 'https://fapi.binance.com/futures/data/'
        const ratiovalue24hr = 'globalLongShortAccountRatio?symbol=BTCUSDT&period=1d'
        fetch(urlvalue + ratiovalue)
            .then(function (response) {
                return response.json()
            })
            .then(function (data) {
                const initialvalue15m = parseFloat(data.at(28)['longShortRatio'])
                const finalvalue15m = parseFloat(data.at(29)['longShortRatio'])
                const variation15min = finalvalue15m - initialvalue15m
                const percentage15min = ((finalvalue15m / initialvalue15m) - 1) * 100
                const lsrgvalue = data.at(29)['longShortRatio']
                const tstmp = data.at(29)['timestamp']
                const dtlsr = new Date(tstmp)
                document.getElementById('lsrglobal').
                    innerHTML = parseFloat(lsrgvalue).toFixed(3)
                document.getElementById('LSR').
                    innerHTML = parseFloat(lsrgvalue).toFixed(3)
                document.getElementById('btcusdt').
                    innerHTML = data[5]['symbol']
                document.getElementById('timestamplsrg').
                    innerHTML = dtlsr.toLocaleString()
                document.getElementById('15mlsr').
                    innerHTML = variation15min.toFixed(3)
                document.getElementById('15mplsr').
                    innerHTML = percentage15min.toFixed(2)+'%'

                fetch(urlvalue4hr + ratiovalue4hr)
                    .then(function (response) {
                        return response.json()
                    }).then(function (data2) {
                        const initialvalue4h = parseFloat(data2.at(28)['longShortRatio'])
                        const finalvalue4h = parseFloat(data2.at(29)['longShortRatio'])
                        const variation4h = finalvalue4h - initialvalue4h
                        const percentage4h = ((finalvalue4h/initialvalue4h) -1 )*100
                        document.getElementById('alt4h').
                            innerHTML = parseFloat(percentage4h).toFixed(2) + '%'
                        document.getElementById('4hlsr').
                            innerHTML = parseFloat(variation4h).toFixed(3)
                        document.getElementById('4hplsr').
                            innerHTML = parseFloat(percentage4h).toFixed(2) + '%'
                    })
                fetch(urlvalue1hr + ratiovalue1hr)
                    .then(function (response) {
                        return response.json()
                    }).then(function (data3) {
                        const initialvalue1h = parseFloat(data3.at(28)['longShortRatio'])
                        const finalvalue1h = parseFloat(data3.at(29)['longShortRatio'])
                        const variation1h = finalvalue1h - initialvalue1h
                        const percentage1h = ((finalvalue1h / initialvalue1h) - 1) * 100
                        document.getElementById('1hlsr').
                            innerHTML = parseFloat(variation1h).toFixed(3)
                        document.getElementById('1hplsr').
                            innerHTML = parseFloat(percentage1h).toFixed(2) + '%'
                    })
                fetch(urlvalue24hr + ratiovalue24hr)
                    .then(function (response) {
                        return response.json()
                    }).then(function (data4) {
                        const initialvalue24h = parseFloat(data4.at(28)['longShortRatio'])
                        const finalvalue24h = parseFloat(data4.at(29)['longShortRatio'])
                        const variation24h = finalvalue24h - initialvalue24h
                        const percentage24h = ((finalvalue24h / initialvalue24h) - 1) * 100
                        document.getElementById('24hlsr').
                            innerHTML = parseFloat(variation24h).toFixed(3)
                        document.getElementById('24hplsr').
                            innerHTML = parseFloat(percentage24h).toFixed(2) + '%'
                    })

                    
            })

            // ZILUSDT
        const urlvalueZILUSDT = 'https://fapi.binance.com/futures/data/'
        const ratiovalueZILUSDT = 'globalLongShortAccountRatio?symbol=ZILUSDT&period=15m'
        const urlvalue4hrZILUSDT = 'https://fapi.binance.com/futures/data/'
        const ratiovalue4hrZILUSDT = 'globalLongShortAccountRatio?symbol=ZILUSDT&period=4h'
        const urlvalue1hrZILUSDT = 'https://fapi.binance.com/futures/data/'
        const ratiovalue1hrZILUSDT = 'globalLongShortAccountRatio?symbol=ZILUSDT&period=1h'
        const urlvalue24hrZILUSDT = 'https://fapi.binance.com/futures/data/'
        const ratiovalue24hrZILUSDT = 'globalLongShortAccountRatio?symbol=ZILUSDT&period=1d'
        fetch(urlvalueZILUSDT + ratiovalueZILUSDT)
            .then(function (response) {
                return response.json()
            })
            .then(function (data5) {
                const initialvalue = parseFloat(data5.at(28)['longShortRatio'])
                const finalvalue = parseFloat(data5.at(29)['longShortRatio'])
                const variation = finalvalue - initialvalue
                const percentage = ((finalvalue / initialvalue) - 1) * 100
                document.getElementById('zilusdt').
                    innerHTML = data5.at(28)['symbol']
                document.getElementById('15mlsrZILUSDT').
                    innerHTML = parseFloat(variation).toFixed(3)
                document.getElementById('15mplsrZILUSDT').
                    innerHTML = parseFloat(percentage).toFixed(2) + '%'
                document.getElementById('lsrglobalZILUSDT').
                    innerHTML = finalvalue.toFixed(3)
            })
        fetch(urlvalue1hrZILUSDT + ratiovalue1hrZILUSDT)
            .then(function (response) {
                return response.json()
            })
            .then(function (data6) {
                const initialvalue1h = parseFloat(data6.at(28)['longShortRatio'])
                const finalvalue1h = parseFloat(data6.at(29)['longShortRatio'])
                const variation1h = finalvalue1h - initialvalue1h
                const percentage1h = ((finalvalue1h / initialvalue1h) - 1) * 100
                document.getElementById('1hlsrZILUSDT').
                    innerHTML = parseFloat(variation1h).toFixed(3)
                document.getElementById('1hplsrZILUSDT').
                    innerHTML = parseFloat(percentage1h).toFixed(2) + '%'

            })
        fetch(urlvalue4hrZILUSDT + ratiovalue4hrZILUSDT)
            .then(function (response) {
                return response.json()
            })
            .then(function (data7) {
                const initialvalue4h = parseFloat(data7.at(28)['longShortRatio'])
                const finalvalue4h = parseFloat(data7.at(29)['longShortRatio'])
                const variation4h = finalvalue4h - initialvalue4h
                const percentage4h = ((finalvalue4h / initialvalue4h) - 1) * 100
                document.getElementById('4hlsrZILUSDT').
                    innerHTML = parseFloat(variation4h).toFixed(3)
                document.getElementById('4hplsrZILUSDT').
                    innerHTML = parseFloat(percentage4h).toFixed(2) + '%'

            })
        fetch(urlvalue24hrZILUSDT + ratiovalue24hrZILUSDT)
            .then(function (response) {
                return response.json()
            })
            .then(function (data8) {
                const initialvalue24h = parseFloat(data8.at(28)['longShortRatio'])
                const finalvalue24h = parseFloat(data8.at(29)['longShortRatio'])
                const variation24h = finalvalue24h - initialvalue24h
                const percentage24h = ((finalvalue24h / initialvalue24h) - 1) * 100
                document.getElementById('24hlsrZILUSDT').
                    innerHTML = parseFloat(variation24h).toFixed(3)
                document.getElementById('24hplsrZILUSDT').
                    innerHTML = parseFloat(percentage24h).toFixed(2) + '%'

            })
    </script>
    <footer>

    </footer>
</body>
</html>